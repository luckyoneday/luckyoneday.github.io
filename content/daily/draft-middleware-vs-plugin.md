---
title: "middleware vs plugin"
date: 2019-12-03T14:32:03+08:00
lastmod: 2019-12-03T14:32:03+08:00
draft: true
keywords: ["daily"]
description: "middleware和plugin的区别"
author: "youting"
---

## middleware 和 plugin 的区别

这是蓝教授今天提出来的问题，参考资料也是蓝教授给出来的。

文章来自于 egg 文档，egg 用的是插件机制，so 有一部分关于中间件机制可能存在的一些问题的描述：

- 中间件加载是按一定顺序来的，由于中间件机制无法管理准确的顺序，所以完全由用户来负责设置执行顺序。这一点来说并不友好，因为顺序不当会引发意外结果。
- 中间件的定位是拦截用户的请求，以便于在处理请求之前或之后进行例如身份验证，安全检查，日志记录等。但是，在某些情况下，此类功能可能与请求无关，例如计时任务，消息订阅，后端逻辑等。
- 一些功能包括非常复杂的初始化逻辑，需要在应用程序启动时完成。这显然不适合中间件实现。

而 egg 的插件更像是一个“小型应用”，可以包含中间件。

（小声哔哔：上面简直不知所云，因为插件也有 next 也依赖加载顺序，但是我也没查到别的什么资料，先这么放着吧。）

## 参考资料

- [Plugin - egg.js](https://eggjs.org/en/basics/plugin.html)
