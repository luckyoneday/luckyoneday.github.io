---
title: "JavaScript 面试知识点汇总"
date: 2021-04-17T11:49:26+08:00
lastmod: 2021-04-17T11:49:26+08:00
draft: false
toc: true
keywords: ["interview"]
description: "JavaScript 面试知识点汇总"
author: "youting"
tags: ["interview"]
---

## 原型链和继承

## new 做了什么

## 执行上下文

执行上下文就是当前 JavaScript 代码被解析和执行时所处的环境，也叫做执行环境。

创建执行上下文时，变量对象、作用域链和 this 指向会被分别指定。

## 闭包

## 事件循环

JavaScript 是单线程、非阻塞的，需要操作 DOM 导致其无法多线程（一个线程添加属性，一个线程删除节点就会起冲突）；非阻塞则基于事件循环实现。

主线程遇到一个同步任务时直接添加到执行栈中执行，当遇到一个异步事件时，会将这个异步事件挂起在任务队列（task queue）中。

当主线程执行完当前执行栈中的任务后，会去查看任务队列是否有任务，若有则取出并执行，这个过程就是**事件循环**。

任务队列分为宏任务和微任务：便于对任务进行优先级区分。

### 宏任务

- `script`（整体代码）
- `setTimeout`
- `setInterval`
- `I/O`
- UI 交互
- `setImmediate`

### 微任务

- `Promise.then`
- `MutationObserver`
- `process.nextTick`

在当前执行栈为空时，主线程会查看微任务队列是否有事件存在。存在，依次执行微队列中的事件对应的回调，若微任务在执行过程中产生了新的微任务，则继续执行微任务，直到微任务队列为空；如果不存在，那么就从宏任务队列中取出一个事件并把对应的回调加入当前执行栈，执行宏任务，并执行该宏任务产生的微任务。

## 垃圾回收

所谓的垃圾回收就是找出那些不再继续使用的变量，然后释放出其所占用的内存。垃圾回收会按照固定的时间间隔周期性地执行这一操作。

JavaScript 使用的垃圾回收机制自动管理内存 -- 垃圾回收是不可见的，可以大幅简化程序的内存管理代码，降低程序员的负担，减少因长时间运行而带来的内存泄露问题。但是程序员无法掌控内存，无法强迫进行垃圾回收，无法干预内存处理。

### 引用计数

跟踪记录每个值被引用的次数，被引用加 1，被释放减 1。如果一个值引用次数是 0，就表示这个值不再用到了，因此可以将这块内存释放。但是循环引用会有 bug。

现代浏览器采用标记清除的方式：当变量进入执行环境时，这个变量被标记为「进入环境」。当变量离开执行环境时标记为「离开环境」。最后垃圾收集器完成内存清除工作，销毁那些带标记的值并回收它们所占用的内存空间（所谓的环境就是执行环境）。

某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁。全局执行环境只有关闭网页的时候才销毁。
